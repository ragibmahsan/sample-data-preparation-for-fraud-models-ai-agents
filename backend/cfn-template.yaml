Validating action group:  UserInputAction
Validating action group:  CodeInterpreterAction
Validating action group:  flow_creation_actions
Validating action group:  fraud_processing_job
Validating action group:  UserInputAction
Validating action group:  CodeInterpreterAction
Validating action group:  fraud_synthetic_data
Validating action group:  categorical_to_ordinal
Validating action group:  one_hot_encode
Validating action group:  convert_to_long
Validating action group:  event_time
Validating action group:  text_to_lowercase
Validating action group:  symbol_removal
Validating action group:  convert_time
Validating action group:  drop_columns
Validating action group:  UserInputAction
Validating action group:  CodeInterpreterAction
Resources:
  FraudDetectionAccessLogsBucketA6F6556B:
    Type: AWS::S3::Bucket
    Properties:
      BucketEncryption:
        ServerSideEncryptionConfiguration:
          - ServerSideEncryptionByDefault:
              SSEAlgorithm: AES256
      BucketName: fraud-detection-access-logs-298653574634-us-east-1
      LifecycleConfiguration:
        Rules:
          - ExpirationInDays: 90
            Id: DeleteOldAccessLogs
            Status: Enabled
      PublicAccessBlockConfiguration:
        BlockPublicAcls: true
        BlockPublicPolicy: true
        IgnorePublicAcls: true
        RestrictPublicBuckets: true
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: BackendStack/FraudDetectionAccessLogsBucket/Resource
  FraudDetectionAccessLogsBucketPolicy4EAEF08D:
    Type: AWS::S3::BucketPolicy
    Properties:
      Bucket:
        Ref: FraudDetectionAccessLogsBucketA6F6556B
      PolicyDocument:
        Statement:
          - Action: s3:*
            Condition:
              Bool:
                aws:SecureTransport: "false"
            Effect: Deny
            Principal:
              AWS: "*"
            Resource:
              - Fn::GetAtt:
                  - FraudDetectionAccessLogsBucketA6F6556B
                  - Arn
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - FraudDetectionAccessLogsBucketA6F6556B
                        - Arn
                    - /*
          - Action: s3:PutObject
            Condition:
              ArnLike:
                aws:SourceArn:
                  Fn::GetAtt:
                    - FraudDetectionBucketE35752C2
                    - Arn
              StringEquals:
                aws:SourceAccount: "298653574634"
            Effect: Allow
            Principal:
              Service: logging.s3.amazonaws.com
            Resource:
              Fn::Join:
                - ""
                - - Fn::GetAtt:
                      - FraudDetectionAccessLogsBucketA6F6556B
                      - Arn
                  - /fraud-detection-bucket-logs/*
        Version: "2012-10-17"
    Metadata:
      aws:cdk:path: BackendStack/FraudDetectionAccessLogsBucket/Policy/Resource
  FraudDetectionBucketE35752C2:
    Type: AWS::S3::Bucket
    Properties:
      BucketEncryption:
        ServerSideEncryptionConfiguration:
          - ServerSideEncryptionByDefault:
              SSEAlgorithm: AES256
      BucketName: fraud-detection-298653574634-us-east-1
      LoggingConfiguration:
        DestinationBucketName:
          Ref: FraudDetectionAccessLogsBucketA6F6556B
        LogFilePrefix: fraud-detection-bucket-logs/
      PublicAccessBlockConfiguration:
        BlockPublicAcls: true
        BlockPublicPolicy: true
        IgnorePublicAcls: true
        RestrictPublicBuckets: true
      Tags:
        - Key: aws-cdk:cr-owned:input_data/:1654f67e
          Value: "true"
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: BackendStack/FraudDetectionBucket/Resource
  FraudDetectionBucketPolicyA5A666F9:
    Type: AWS::S3::BucketPolicy
    Properties:
      Bucket:
        Ref: FraudDetectionBucketE35752C2
      PolicyDocument:
        Statement:
          - Action: s3:*
            Condition:
              Bool:
                aws:SecureTransport: "false"
            Effect: Deny
            Principal:
              AWS: "*"
            Resource:
              - Fn::GetAtt:
                  - FraudDetectionBucketE35752C2
                  - Arn
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - FraudDetectionBucketE35752C2
                        - Arn
                    - /*
        Version: "2012-10-17"
    Metadata:
      aws:cdk:path: BackendStack/FraudDetectionBucket/Policy/Resource
  CreateInputDataFolderAwsCliLayerBFE7147E:
    Type: AWS::Lambda::LayerVersion
    Properties:
      Content:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: 2e8ea9d657c30715826b809f41d1f2482ff4e16f37385f55fbcf7d8ccfdd14db.zip
      Description: /opt/awscli/aws
    Metadata:
      aws:cdk:path: BackendStack/CreateInputDataFolder/AwsCliLayer/Resource
      aws:asset:path: asset.2e8ea9d657c30715826b809f41d1f2482ff4e16f37385f55fbcf7d8ccfdd14db.zip
      aws:asset:is-bundled: false
      aws:asset:property: Content
  CreateInputDataFolderCustomResource5B66368A:
    Type: Custom::CDKBucketDeployment
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536
          - Arn
      SourceBucketNames:
        - cdk-hnb659fds-assets-298653574634-us-east-1
      SourceObjectKeys:
        - 0ebe373b830368ddb15562b0c84a1bebfb98f5035d561e0c05053e79746b4f3b.zip
      DestinationBucketName:
        Ref: FraudDetectionBucketE35752C2
      DestinationBucketKeyPrefix: input_data/
      Prune: true
      OutputObjectKeys: true
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: BackendStack/CreateInputDataFolder/CustomResource/Default
  CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: BackendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/Resource
  CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - s3:GetBucket*
              - s3:GetObject*
              - s3:List*
            Effect: Allow
            Resource:
              - arn:aws:s3:::cdk-hnb659fds-assets-298653574634-us-east-1
              - arn:aws:s3:::cdk-hnb659fds-assets-298653574634-us-east-1/*
          - Action:
              - s3:Abort*
              - s3:DeleteObject*
              - s3:GetBucket*
              - s3:GetObject*
              - s3:List*
              - s3:PutObject
              - s3:PutObjectLegalHold
              - s3:PutObjectRetention
              - s3:PutObjectTagging
              - s3:PutObjectVersionTagging
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - FraudDetectionBucketE35752C2
                  - Arn
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - FraudDetectionBucketE35752C2
                        - Arn
                    - /*
        Version: "2012-10-17"
      PolicyName: CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF
      Roles:
        - Ref: CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265
    Metadata:
      aws:cdk:path: BackendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy/Resource
  CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: 9a1fcb4a7ecba81ad70e9d3fb241f6794497da945dae5f25924e4dd002b65f2d.zip
      Environment:
        Variables:
          AWS_CA_BUNDLE: /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
      Handler: index.handler
      Layers:
        - Ref: CreateInputDataFolderAwsCliLayerBFE7147E
      Role:
        Fn::GetAtt:
          - CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265
          - Arn
      Runtime: python3.11
      Timeout: 900
    DependsOn:
      - CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF
      - CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265
    Metadata:
      aws:cdk:path: BackendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Resource
      aws:asset:path: asset.9a1fcb4a7ecba81ad70e9d3fb241f6794497da945dae5f25924e4dd002b65f2d
      aws:asset:is-bundled: false
      aws:asset:property: Code
  ListLambdaRole0ACD01C2:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: BackendStack/ListLambdaRole/Resource
  ListLambdaRoleDefaultPolicy47F23E4A:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - s3:GetObject
              - s3:ListBucket
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - FraudDetectionBucketE35752C2
                  - Arn
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - FraudDetectionBucketE35752C2
                        - Arn
                    - /*
        Version: "2012-10-17"
      PolicyName: ListLambdaRoleDefaultPolicy47F23E4A
      Roles:
        - Ref: ListLambdaRole0ACD01C2
    Metadata:
      aws:cdk:path: BackendStack/ListLambdaRole/DefaultPolicy/Resource
  AnalysisLambdaRole1C651E64:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service:
                - lambda.amazonaws.com
                - sagemaker.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/AmazonSageMakerFullAccess
    Metadata:
      aws:cdk:path: BackendStack/AnalysisLambdaRole/Resource
  AnalysisLambdaRoleDefaultPolicyD041CE3E:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: iam:PassRole
            Effect: Allow
            Resource:
              Fn::GetAtt:
                - AnalysisLambdaRole1C651E64
                - Arn
          - Action:
              - s3:GetObject
              - s3:ListBucket
              - s3:PutObject
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - FraudDetectionBucketE35752C2
                  - Arn
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - FraudDetectionBucketE35752C2
                        - Arn
                    - /*
        Version: "2012-10-17"
      PolicyName: AnalysisLambdaRoleDefaultPolicyD041CE3E
      Roles:
        - Ref: AnalysisLambdaRole1C651E64
    Metadata:
      aws:cdk:path: BackendStack/AnalysisLambdaRole/DefaultPolicy/Resource
  FraudTransformLambdaRole9462075E:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/AmazonS3FullAccess
      RoleName: fraud-transform-lambda-role
    Metadata:
      aws:cdk:path: BackendStack/FraudTransformLambdaRole/Resource
  syntheticdata6FDD62AB:
    Type: AWS::Lambda::LayerVersion
    Properties:
      Content:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: dc690b61cd473e075682a82dfa0b69184fba01a76449eea32e5b0f1f5a043445.zip
    Metadata:
      aws:cdk:path: BackendStack/syntheticdata/Resource
      aws:asset:path: asset.dc690b61cd473e075682a82dfa0b69184fba01a76449eea32e5b0f1f5a043445.zip
      aws:asset:is-bundled: false
      aws:asset:property: Content
  ListFlowUriFunctionB6EA5E59:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: cde0ffe4abb91040d0d30a3fb1cd4b54af258d8e3b5c3d3e3426a63836bff853.zip
      Environment:
        Variables:
          S3_BUCKET_NAME:
            Ref: FraudDetectionBucketE35752C2
          S3_FLOW_PREFIX: flows
      FunctionName: fraud-list-flow-uri
      Handler: list_flow_uri.lambda_handler
      Role:
        Fn::GetAtt:
          - ListLambdaRole0ACD01C2
          - Arn
      Runtime: python3.13
      Timeout: 60
    DependsOn:
      - ListLambdaRoleDefaultPolicy47F23E4A
      - ListLambdaRole0ACD01C2
    Metadata:
      aws:cdk:path: BackendStack/ListFlowUriFunction/Resource
      aws:asset:path: asset.cde0ffe4abb91040d0d30a3fb1cd4b54af258d8e3b5c3d3e3426a63836bff853
      aws:asset:is-bundled: false
      aws:asset:property: Code
  ListReportsUriFunctionEAD3E3C2:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: 41d114939aa8e91480c422f9c49de584418012725637dcc919185be52ee3c951.zip
      Environment:
        Variables:
          S3_BUCKET_NAME:
            Ref: FraudDetectionBucketE35752C2
          S3_DATA_PREFIX: reports
      FunctionName: fraud-list-reports-uri
      Handler: list_reports_uri.lambda_handler
      Role:
        Fn::GetAtt:
          - ListLambdaRole0ACD01C2
          - Arn
      Runtime: python3.13
      Timeout: 60
    DependsOn:
      - ListLambdaRoleDefaultPolicy47F23E4A
      - ListLambdaRole0ACD01C2
    Metadata:
      aws:cdk:path: BackendStack/ListReportsUriFunction/Resource
      aws:asset:path: asset.41d114939aa8e91480c422f9c49de584418012725637dcc919185be52ee3c951
      aws:asset:is-bundled: false
      aws:asset:property: Code
  ListS3UriFunction235B676F:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: 38d2057f506b5496e608653af419e63c8eb5ba6d89a40f08dc0cf34c79ad49a3.zip
      Environment:
        Variables:
          S3_BUCKET_NAME:
            Ref: FraudDetectionBucketE35752C2
          S3_DATA_PREFIX: input_data
      FunctionName: fraud-list-s3-uri
      Handler: list_s3_uri.lambda_handler
      Role:
        Fn::GetAtt:
          - ListLambdaRole0ACD01C2
          - Arn
      Runtime: python3.13
      Timeout: 60
    DependsOn:
      - ListLambdaRoleDefaultPolicy47F23E4A
      - ListLambdaRole0ACD01C2
    Metadata:
      aws:cdk:path: BackendStack/ListS3UriFunction/Resource
      aws:asset:path: asset.38d2057f506b5496e608653af419e63c8eb5ba6d89a40f08dc0cf34c79ad49a3
      aws:asset:is-bundled: false
      aws:asset:property: Code
  ProcessingFunctionCD3C33F7:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: 00f2dd6e909e29e5e0713b308dba56450dca9ebdaaf409ef2ff1f49fc341a287.zip
      Environment:
        Variables:
          BUCKET_NAME:
            Ref: FraudDetectionBucketE35752C2
          SAGEMAKER_ROLE_ARN:
            Fn::GetAtt:
              - AnalysisLambdaRole1C651E64
              - Arn
          CONTAINER_URI: 663277389841.dkr.ecr.us-east-1.amazonaws.com/sagemaker-data-wrangler-container:5.0.9
          INSTANCE_COUNT: "2"
          INSTANCE_TYPE: ml.m5.4xlarge
          VOLUME_SIZE: "30"
      FunctionName: fraud-processing
      Handler: fraud_processing_job.lambda_handler
      Role:
        Fn::GetAtt:
          - AnalysisLambdaRole1C651E64
          - Arn
      Runtime: python3.13
      Timeout: 300
    DependsOn:
      - AnalysisLambdaRoleDefaultPolicyD041CE3E
      - AnalysisLambdaRole1C651E64
    Metadata:
      aws:cdk:path: BackendStack/ProcessingFunction/Resource
      aws:asset:path: asset.00f2dd6e909e29e5e0713b308dba56450dca9ebdaaf409ef2ff1f49fc341a287
      aws:asset:is-bundled: false
      aws:asset:property: Code
  ProcessingFunctionBedrockDataAnalysisAgentInvokePermissionCD715BFE:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - ProcessingFunctionCD3C33F7
          - Arn
      Principal: bedrock.amazonaws.com
      SourceArn:
        Fn::GetAtt:
          - DataAnalysisAgentAgentResourceD97881DC
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/ProcessingFunction/BedrockDataAnalysisAgentInvokePermission
  ProcessingFunctionLambdaInvocationPolicyc89fa5b4fd981963C323BDDC:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - ProcessingFunctionCD3C33F7
          - Arn
      Principal: bedrock.amazonaws.com
      SourceAccount: "298653574634"
      SourceArn:
        Fn::GetAtt:
          - DataAnalysisAgentAgentResourceD97881DC
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/ProcessingFunction/LambdaInvocationPolicy-c89fa5b4fd981963
  CreateFlowFunctionF9FE51D4:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: 826b6aae083bde7d589bdf8eb017076c0993e986a33d77314561c2c0dc121f76.zip
      Environment:
        Variables:
          BUCKET_NAME:
            Ref: FraudDetectionBucketE35752C2
          SAMPLE_SIZE: "10000"
          INSTANCE_TYPE: ml.m5.xlarge
          INSTANCE_COUNT: "2"
      FunctionName: fraud-create-flow
      Handler: create_flow.lambda_handler
      Layers:
        - Ref: PandaLayerArnParameter
      MemorySize: 1024
      Role:
        Fn::GetAtt:
          - AnalysisLambdaRole1C651E64
          - Arn
      Runtime: python3.13
      Timeout: 300
    DependsOn:
      - AnalysisLambdaRoleDefaultPolicyD041CE3E
      - AnalysisLambdaRole1C651E64
    Metadata:
      aws:cdk:path: BackendStack/CreateFlowFunction/Resource
      aws:asset:path: asset.826b6aae083bde7d589bdf8eb017076c0993e986a33d77314561c2c0dc121f76
      aws:asset:is-bundled: false
      aws:asset:property: Code
  CreateFlowFunctionBedrockDataAnalysisAgentInvokePermissionE48CEC97:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - CreateFlowFunctionF9FE51D4
          - Arn
      Principal: bedrock.amazonaws.com
      SourceArn:
        Fn::GetAtt:
          - DataAnalysisAgentAgentResourceD97881DC
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/CreateFlowFunction/BedrockDataAnalysisAgentInvokePermission
  CreateFlowFunctionLambdaInvocationPolicyc89fa5b4fd981963926C7C01:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - CreateFlowFunctionF9FE51D4
          - Arn
      Principal: bedrock.amazonaws.com
      SourceAccount: "298653574634"
      SourceArn:
        Fn::GetAtt:
          - DataAnalysisAgentAgentResourceD97881DC
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/CreateFlowFunction/LambdaInvocationPolicy-c89fa5b4fd981963
  SyntheticDataFunction583C2440:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: de0e223bfc5b35b09f4511e1a5585d9b8ca551ca27ba39df11796d17049156b2.zip
      EphemeralStorage:
        Size: 10240
      FunctionName: fraud-synthetic-data
      Handler: lambda_function.lambda_handler
      Layers:
        - Ref: syntheticdata6FDD62AB
      MemorySize: 10240
      Role:
        Fn::GetAtt:
          - FraudTransformLambdaRole9462075E
          - Arn
      Runtime: python3.13
      Timeout: 300
    DependsOn:
      - FraudTransformLambdaRole9462075E
    Metadata:
      aws:cdk:path: BackendStack/SyntheticDataFunction/Resource
      aws:asset:path: asset.de0e223bfc5b35b09f4511e1a5585d9b8ca551ca27ba39df11796d17049156b2
      aws:asset:is-bundled: false
      aws:asset:property: Code
  SyntheticDataFunctionBedrockTransformAgentInvokePermission1D65AF9A:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - SyntheticDataFunction583C2440
          - Arn
      Principal: bedrock.amazonaws.com
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/SyntheticDataFunction/BedrockTransformAgentInvokePermission
  SyntheticDataFunctionLambdaInvocationPolicyc87a94fd169c02933FDCF2DC:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - SyntheticDataFunction583C2440
          - Arn
      Principal: bedrock.amazonaws.com
      SourceAccount: "298653574634"
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/SyntheticDataFunction/LambdaInvocationPolicy-c87a94fd169c0293
  DropColumnsFunction3E90BD22:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: f5e3cfd24acb48eb1f1c6cb4a29f7cb9fdc822d2427dcf67eb0a0917cb033682.zip
      Description: Drop Columns Lambda Function
      EphemeralStorage:
        Size: 10240
      FunctionName: drop_columns
      Handler: lambda_function.lambda_handler
      Layers:
        - Ref: PandaLayerArnParameter
      MemorySize: 10240
      Role:
        Fn::GetAtt:
          - FraudTransformLambdaRole9462075E
          - Arn
      Runtime: python3.13
      Timeout: 303
    DependsOn:
      - FraudTransformLambdaRole9462075E
    Metadata:
      aws:cdk:path: BackendStack/DropColumnsFunction/Resource
      aws:asset:path: asset.f5e3cfd24acb48eb1f1c6cb4a29f7cb9fdc822d2427dcf67eb0a0917cb033682
      aws:asset:is-bundled: false
      aws:asset:property: Code
  DropColumnsFunctionBedrockTransformAgentInvokePermissionE1AA8641:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - DropColumnsFunction3E90BD22
          - Arn
      Principal: bedrock.amazonaws.com
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/DropColumnsFunction/BedrockTransformAgentInvokePermission
  DropColumnsFunctionLambdaInvocationPolicyc87a94fd169c02938622DFC8:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - DropColumnsFunction3E90BD22
          - Arn
      Principal: bedrock.amazonaws.com
      SourceAccount: "298653574634"
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/DropColumnsFunction/LambdaInvocationPolicy-c87a94fd169c0293
  ConvertTimeFunction0BB58171:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: ff8d69ef768d0c69d6f4c6bc7956e4648938f996d2053629f733e9fdc9b3fb19.zip
      Description: Convert Time Lambda Function
      EphemeralStorage:
        Size: 10240
      FunctionName: convert_timestamp
      Handler: lambda_function.lambda_handler
      Layers:
        - Ref: PandaLayerArnParameter
      MemorySize: 10240
      Role:
        Fn::GetAtt:
          - FraudTransformLambdaRole9462075E
          - Arn
      Runtime: python3.13
      Timeout: 303
    DependsOn:
      - FraudTransformLambdaRole9462075E
    Metadata:
      aws:cdk:path: BackendStack/ConvertTimeFunction/Resource
      aws:asset:path: asset.ff8d69ef768d0c69d6f4c6bc7956e4648938f996d2053629f733e9fdc9b3fb19
      aws:asset:is-bundled: false
      aws:asset:property: Code
  ConvertTimeFunctionBedrockTransformAgentInvokePermission9AFFB2A7:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - ConvertTimeFunction0BB58171
          - Arn
      Principal: bedrock.amazonaws.com
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/ConvertTimeFunction/BedrockTransformAgentInvokePermission
  ConvertTimeFunctionLambdaInvocationPolicyc87a94fd169c02937904CA5A:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - ConvertTimeFunction0BB58171
          - Arn
      Principal: bedrock.amazonaws.com
      SourceAccount: "298653574634"
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/ConvertTimeFunction/LambdaInvocationPolicy-c87a94fd169c0293
  SymbolRemovalFunction4C32CECE:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: b01f49d124b42cf444905df706f74a2556fa3ad2dab27a47a0309ec7837b85f6.zip
      Description: Convert Time Lambda Function
      EphemeralStorage:
        Size: 10240
      FunctionName: symbol_removal
      Handler: lambda_function.lambda_handler
      Layers:
        - Ref: PandaLayerArnParameter
      MemorySize: 10240
      Role:
        Fn::GetAtt:
          - FraudTransformLambdaRole9462075E
          - Arn
      Runtime: python3.13
      Timeout: 303
    DependsOn:
      - FraudTransformLambdaRole9462075E
    Metadata:
      aws:cdk:path: BackendStack/SymbolRemovalFunction/Resource
      aws:asset:path: asset.b01f49d124b42cf444905df706f74a2556fa3ad2dab27a47a0309ec7837b85f6
      aws:asset:is-bundled: false
      aws:asset:property: Code
  SymbolRemovalFunctionBedrockTransformAgentInvokePermissionC46B55CA:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - SymbolRemovalFunction4C32CECE
          - Arn
      Principal: bedrock.amazonaws.com
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/SymbolRemovalFunction/BedrockTransformAgentInvokePermission
  SymbolRemovalFunctionLambdaInvocationPolicyc87a94fd169c02935E2CC7C3:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - SymbolRemovalFunction4C32CECE
          - Arn
      Principal: bedrock.amazonaws.com
      SourceAccount: "298653574634"
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/SymbolRemovalFunction/LambdaInvocationPolicy-c87a94fd169c0293
  Text2LowercaseFunction40668D53:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: a11507aa09642759f1cde78a841db9aec0b904faae95578e373c0f2390f2ca03.zip
      Description: Text to Lowercase Lambda Function
      EphemeralStorage:
        Size: 10240
      FunctionName: text_2_lower
      Handler: lambda_function.lambda_handler
      Layers:
        - Ref: PandaLayerArnParameter
      MemorySize: 10240
      Role:
        Fn::GetAtt:
          - FraudTransformLambdaRole9462075E
          - Arn
      Runtime: python3.13
      Timeout: 303
    DependsOn:
      - FraudTransformLambdaRole9462075E
    Metadata:
      aws:cdk:path: BackendStack/Text2LowercaseFunction/Resource
      aws:asset:path: asset.a11507aa09642759f1cde78a841db9aec0b904faae95578e373c0f2390f2ca03
      aws:asset:is-bundled: false
      aws:asset:property: Code
  Text2LowercaseFunctionBedrockTransformAgentInvokePermission77128510:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - Text2LowercaseFunction40668D53
          - Arn
      Principal: bedrock.amazonaws.com
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/Text2LowercaseFunction/BedrockTransformAgentInvokePermission
  Text2LowercaseFunctionLambdaInvocationPolicyc87a94fd169c0293CE976B0D:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - Text2LowercaseFunction40668D53
          - Arn
      Principal: bedrock.amazonaws.com
      SourceAccount: "298653574634"
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/Text2LowercaseFunction/LambdaInvocationPolicy-c87a94fd169c0293
  EventTimeFunction37625F95:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: fb3e8a1e36c989b8014b52d6df9642f0de8765b1215cc205fc37ff854f5a3f0a.zip
      Description: Event Time Lambda Function
      EphemeralStorage:
        Size: 10240
      FunctionName: event_time
      Handler: lambda_function.lambda_handler
      Layers:
        - Ref: PandaLayerArnParameter
      MemorySize: 10240
      Role:
        Fn::GetAtt:
          - FraudTransformLambdaRole9462075E
          - Arn
      Runtime: python3.13
      Timeout: 303
    DependsOn:
      - FraudTransformLambdaRole9462075E
    Metadata:
      aws:cdk:path: BackendStack/EventTimeFunction/Resource
      aws:asset:path: asset.fb3e8a1e36c989b8014b52d6df9642f0de8765b1215cc205fc37ff854f5a3f0a
      aws:asset:is-bundled: false
      aws:asset:property: Code
  EventTimeFunctionBedrockTransformAgentInvokePermissionA81BCE16:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - EventTimeFunction37625F95
          - Arn
      Principal: bedrock.amazonaws.com
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/EventTimeFunction/BedrockTransformAgentInvokePermission
  EventTimeFunctionLambdaInvocationPolicyc87a94fd169c0293129FFBF8:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - EventTimeFunction37625F95
          - Arn
      Principal: bedrock.amazonaws.com
      SourceAccount: "298653574634"
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/EventTimeFunction/LambdaInvocationPolicy-c87a94fd169c0293
  Convert2LongFunction8746F4AF:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: 0aae2a4310d442ea615468830b8a134cd6b27a30ee44e91df14812a7c9af29d3.zip
      Description: Event Time Lambda Function
      EphemeralStorage:
        Size: 10240
      FunctionName: convert_2_long
      Handler: lambda_function.lambda_handler
      Layers:
        - Ref: PandaLayerArnParameter
      MemorySize: 10240
      Role:
        Fn::GetAtt:
          - FraudTransformLambdaRole9462075E
          - Arn
      Runtime: python3.13
      Timeout: 303
    DependsOn:
      - FraudTransformLambdaRole9462075E
    Metadata:
      aws:cdk:path: BackendStack/Convert2LongFunction/Resource
      aws:asset:path: asset.0aae2a4310d442ea615468830b8a134cd6b27a30ee44e91df14812a7c9af29d3
      aws:asset:is-bundled: false
      aws:asset:property: Code
  Convert2LongFunctionBedrockTransformAgentInvokePermission322BEEA8:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - Convert2LongFunction8746F4AF
          - Arn
      Principal: bedrock.amazonaws.com
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/Convert2LongFunction/BedrockTransformAgentInvokePermission
  Convert2LongFunctionLambdaInvocationPolicyc87a94fd169c0293D76A12AC:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - Convert2LongFunction8746F4AF
          - Arn
      Principal: bedrock.amazonaws.com
      SourceAccount: "298653574634"
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/Convert2LongFunction/LambdaInvocationPolicy-c87a94fd169c0293
  OneHotEncodeFunction73629A05:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: df39050642fc69f81808f4d0f55d531342cb574951332a442c67d162c6cfab96.zip
      Description: One Hot Encode Lambda Function
      EphemeralStorage:
        Size: 10240
      FunctionName: onehot_encode
      Handler: lambda_function.lambda_handler
      Layers:
        - Ref: PandaLayerArnParameter
      MemorySize: 10240
      Role:
        Fn::GetAtt:
          - FraudTransformLambdaRole9462075E
          - Arn
      Runtime: python3.13
      Timeout: 303
    DependsOn:
      - FraudTransformLambdaRole9462075E
    Metadata:
      aws:cdk:path: BackendStack/OneHotEncodeFunction/Resource
      aws:asset:path: asset.df39050642fc69f81808f4d0f55d531342cb574951332a442c67d162c6cfab96
      aws:asset:is-bundled: false
      aws:asset:property: Code
  OneHotEncodeFunctionBedrockTransformAgentInvokePermissionA3C3E2DC:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - OneHotEncodeFunction73629A05
          - Arn
      Principal: bedrock.amazonaws.com
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/OneHotEncodeFunction/BedrockTransformAgentInvokePermission
  OneHotEncodeFunctionLambdaInvocationPolicyc87a94fd169c029343C5E146:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - OneHotEncodeFunction73629A05
          - Arn
      Principal: bedrock.amazonaws.com
      SourceAccount: "298653574634"
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/OneHotEncodeFunction/LambdaInvocationPolicy-c87a94fd169c0293
  Categorical2OrdFunction089B899C:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: ce827b6e9ebb9197669302bd03434f9ffdd5db74a646933d84c91d21a15bab16.zip
      Description: Categorical to Ordinal Lambda Function
      EphemeralStorage:
        Size: 10240
      FunctionName: categorical_2_ord
      Handler: lambda_function.lambda_handler
      Layers:
        - Ref: PandaLayerArnParameter
      MemorySize: 10240
      Role:
        Fn::GetAtt:
          - FraudTransformLambdaRole9462075E
          - Arn
      Runtime: python3.13
      Timeout: 303
    DependsOn:
      - FraudTransformLambdaRole9462075E
    Metadata:
      aws:cdk:path: BackendStack/Categorical2OrdFunction/Resource
      aws:asset:path: asset.ce827b6e9ebb9197669302bd03434f9ffdd5db74a646933d84c91d21a15bab16
      aws:asset:is-bundled: false
      aws:asset:property: Code
  Categorical2OrdFunctionBedrockTransformAgentInvokePermission9BABA096:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - Categorical2OrdFunction089B899C
          - Arn
      Principal: bedrock.amazonaws.com
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/Categorical2OrdFunction/BedrockTransformAgentInvokePermission
  Categorical2OrdFunctionLambdaInvocationPolicyc87a94fd169c02937E41942D:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - Categorical2OrdFunction089B899C
          - Arn
      Principal: bedrock.amazonaws.com
      SourceAccount: "298653574634"
      SourceArn:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentArn
    Metadata:
      aws:cdk:path: BackendStack/Categorical2OrdFunction/LambdaInvocationPolicy-c87a94fd169c0293
  BedrockDataAnalysisAgentRoleE84CFBBA:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: bedrock.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/AmazonBedrockFullAccess
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/AWSLambda_FullAccess
    Metadata:
      aws:cdk:path: BackendStack/BedrockDataAnalysisAgentRole/Resource
  BedrockDataAnalysisAgentRoleDefaultPolicyE426E49A:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: lambda:InvokeFunction
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - CreateFlowFunctionF9FE51D4
                  - Arn
              - Fn::GetAtt:
                  - ProcessingFunctionCD3C33F7
                  - Arn
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - CreateFlowFunctionF9FE51D4
                        - Arn
                    - :*
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - ProcessingFunctionCD3C33F7
                        - Arn
                    - :*
        Version: "2012-10-17"
      PolicyName: BedrockDataAnalysisAgentRoleDefaultPolicyE426E49A
      Roles:
        - Ref: BedrockDataAnalysisAgentRoleE84CFBBA
    Metadata:
      aws:cdk:path: BackendStack/BedrockDataAnalysisAgentRole/DefaultPolicy/Resource
  DataAnalysisAgentAgentResourceD97881DC:
    Type: AWS::Bedrock::Agent
    Properties:
      ActionGroups:
        - ActionGroupName: UserInputAction
          ActionGroupState: DISABLED
          ParentActionGroupSignature: AMAZON.UserInput
          SkipResourceInUseCheckOnDelete: false
        - ActionGroupName: CodeInterpreterAction
          ActionGroupState: DISABLED
          ParentActionGroupSignature: AMAZON.CodeInterpreter
          SkipResourceInUseCheckOnDelete: false
        - ActionGroupExecutor:
            Lambda:
              Fn::GetAtt:
                - CreateFlowFunctionF9FE51D4
                - Arn
          ActionGroupName: flow_creation_actions
          ActionGroupState: ENABLED
          ApiSchema:
            Payload: |
              openapi: 3.0.0
              info:
                title: Fraud_Detection_Flow_API
                version: 1.0.0
              paths:
                /create_flow:
                  post:
                    operationId: create_flow
                    description: Create a new fraud detection flow
                    responses:
                      '200':
                        description: Flow created successfully
                        content:
                          application/json:
                            schema:
                              type: object
                              properties:
                                flow_name:
                                  type: string
                                  description: Name of the created flow
                                s3_uri:
                                  type: string
                                  description: S3 URI of the created flow
                                status:
                                  type: string
                                  description: Status of the flow creation
                                message:
                                  type: string
                                  description: Result message
                    requestBody:
                      required: true
                      content:
                        application/json:
                          schema:
                            required:
                              - input_s3_uri
                              - target_column
                              - problem_type
                            properties:
                              input_s3_uri:
                                type: string
                                description: S3 URI of the input data file
                              target_column:
                                type: string
                                description: Name of the target column for prediction
                              problem_type:
                                type: string
                                enum:
                                  - Classification
                                  - Regression
                                description: Type of machine learning problem
          Description: Create SageMaker Data Wrangler flow files for fraud detection. Use when user asks to create, make, or generate a flow.
          SkipResourceInUseCheckOnDelete: false
        - ActionGroupExecutor:
            Lambda:
              Fn::GetAtt:
                - ProcessingFunctionCD3C33F7
                - Arn
          ActionGroupName: fraud_processing_job
          ActionGroupState: ENABLED
          ApiSchema:
            Payload: |
              openapi: 3.0.0
              info:
                title: Data_Analysis_API
                version: 1.0.0
              paths:
                /analyze_report:
                  post:
                    operationId: analyze_report
                    description: Analyze a report from S3
                    responses:
                      '200':
                        description: Report analyzed successfully
                        content:
                          application/json:
                            schema:
                              type: object
                              properties:
                                reportUri:
                                  type: string
                                  description: S3 URI of the analyzed report
                                data:
                                  type: object
                                  description: Analyzed report data
                                status:
                                  type: string
                                  description: Analysis status
                    requestBody:
                      required: true
                      content:
                        application/json:
                          schema:
                            type: object
                            required:
                              - report_uri
                            properties:
                              report_uri:
                                type: string
                                description: S3 URI of the report to analyze
                /create_data_quality_insight:
                  post:
                    operationId: create_data_quality_insight
                    description: Create data quality insight
                    responses:
                      '200':
                        description: Data quality insight job created successfully
                        content:
                          application/json:
                            schema:
                              type: object
                              properties:
                                jobName:
                                  type: string
                                  description: Name of the created job
                                jobArn:
                                  type: string
                                  description: ARN of the created job
                                resultsPath:
                                  type: string
                                  description: S3 path for job results
                                status:
                                  type: string
                                  description: Job status
                    requestBody:
                      required: true
                      content:
                        application/json:
                          schema:
                            type: object
                            required:
                              - flow_s3_uri
                              - transactions_s3_uri
                            properties:
                              flow_s3_uri:
                                type: string
                                description: S3 URI of the flow file
                              transactions_s3_uri:
                                type: string
                                description: S3 URI of the transactions file
          Description: Execute SageMaker Data Wrangler processing jobs and analyze reports for fraud detection data quality insights.
          SkipResourceInUseCheckOnDelete: false
      AgentName: bedrock-agent-backendstack-dataanalysisagent-216e8f73
      AgentResourceRoleArn:
        Fn::GetAtt:
          - BedrockDataAnalysisAgentRoleE84CFBBA
          - Arn
      AutoPrepare: true
      FoundationModel:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":bedrock:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - :inference-profile/us.anthropic.claude-3-7-sonnet-20250219-v1:0
      IdleSessionTTLInSeconds: 300
      Instruction: |-
        You are a Data Analysis Agent with access to these specific functions:

        AVAILABLE FUNCTIONS:

        1. create_flow (from flow_creation_actions action group)
           - Purpose: Create SageMaker Data Wrangler flow files for fraud detection
           - Triggers: "create flow", "make flow", "generate flow", "build flow"
           - Required Parameters:
             * input_s3_uri: S3 URI of the input data file
             * target_column: Name of the target column for prediction
             * problem_type: "Classification" or "Regression"
           - Action: EXECUTE IMMEDIATELY, respond "Data Wrangler flow file created successfully"

        2. analyze_report (from fraud_processing_job action group)
           - Purpose: Analyze existing reports from S3
           - Required Parameters:
             * report_uri: S3 URI of the report to analyze
           - Action: EXECUTE IMMEDIATELY, provide comprehensive detailed analysis with:
             * Column statistics (mean, median, std dev, missing values, data types)
             * Data quality assessment (outliers, anomalies, completeness)
             * Feature importance and correlations with target variable
             * Distribution analysis and patterns
             * Specific recommendations for data preprocessing
             * Key insights for fraud detection modeling
             * Format in markdown when requested

        3. create_data_quality_insight (from fraud_processing_job action group)
           - Purpose: Create data quality insight jobs
           - Required Parameters:
             * flow_s3_uri: S3 URI of the flow file
             * transactions_s3_uri: S3 URI of the transactions file
           - Action: EXECUTE IMMEDIATELY, respond "Data quality insight job created successfully"

        CRITICAL RULES:
        - For flow creation: IMMEDIATELY call create_flow function - NO explanations
        - For processing jobs: IMMEDIATELY call create_data_quality_insight - NO explanations
        - For report analysis: IMMEDIATELY call analyze_report and provide FULL DETAILED ANALYSIS with all statistics, insights, and recommendations
        - Always format responses using proper markdown syntax when requested
        - Never respond with just "Analysis completed successfully" - always provide the actual analysis results
      SkipResourceInUseCheckOnDelete: false
    Metadata:
      aws:cdk:path: BackendStack/DataAnalysisAgent/AgentResource
  DataAnalysisAgentAliasA7A3B4D8:
    Type: AWS::Bedrock::AgentAlias
    Properties:
      AgentAliasName: prod
      AgentId:
        Fn::GetAtt:
          - DataAnalysisAgentAgentResourceD97881DC
          - AgentId
      Description: Production alias for Data Analysis Agent
    DependsOn:
      - DataAnalysisAgentAgentResourceD97881DC
    Metadata:
      aws:cdk:path: BackendStack/DataAnalysisAgentAlias/Resource
  BedrockAgentRole7C982E0C:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: bedrock.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/AmazonBedrockFullAccess
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/AWSLambda_FullAccess
    Metadata:
      aws:cdk:path: BackendStack/BedrockAgentRole/Resource
  BedrockAgentRoleDefaultPolicy1462CD5B:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: lambda:InvokeFunction
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - Categorical2OrdFunction089B899C
                  - Arn
              - Fn::GetAtt:
                  - Convert2LongFunction8746F4AF
                  - Arn
              - Fn::GetAtt:
                  - ConvertTimeFunction0BB58171
                  - Arn
              - Fn::GetAtt:
                  - DropColumnsFunction3E90BD22
                  - Arn
              - Fn::GetAtt:
                  - EventTimeFunction37625F95
                  - Arn
              - Fn::GetAtt:
                  - OneHotEncodeFunction73629A05
                  - Arn
              - Fn::GetAtt:
                  - SymbolRemovalFunction4C32CECE
                  - Arn
              - Fn::GetAtt:
                  - SyntheticDataFunction583C2440
                  - Arn
              - Fn::GetAtt:
                  - Text2LowercaseFunction40668D53
                  - Arn
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - Categorical2OrdFunction089B899C
                        - Arn
                    - :*
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - Convert2LongFunction8746F4AF
                        - Arn
                    - :*
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - ConvertTimeFunction0BB58171
                        - Arn
                    - :*
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - DropColumnsFunction3E90BD22
                        - Arn
                    - :*
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - EventTimeFunction37625F95
                        - Arn
                    - :*
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - OneHotEncodeFunction73629A05
                        - Arn
                    - :*
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - SymbolRemovalFunction4C32CECE
                        - Arn
                    - :*
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - SyntheticDataFunction583C2440
                        - Arn
                    - :*
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - Text2LowercaseFunction40668D53
                        - Arn
                    - :*
        Version: "2012-10-17"
      PolicyName: BedrockAgentRoleDefaultPolicy1462CD5B
      Roles:
        - Ref: BedrockAgentRole7C982E0C
    Metadata:
      aws:cdk:path: BackendStack/BedrockAgentRole/DefaultPolicy/Resource
  TransformAgentAgentResource4254275B:
    Type: AWS::Bedrock::Agent
    Properties:
      ActionGroups:
        - ActionGroupName: UserInputAction
          ActionGroupState: DISABLED
          ParentActionGroupSignature: AMAZON.UserInput
          SkipResourceInUseCheckOnDelete: false
        - ActionGroupName: CodeInterpreterAction
          ActionGroupState: DISABLED
          ParentActionGroupSignature: AMAZON.CodeInterpreter
          SkipResourceInUseCheckOnDelete: false
        - ActionGroupExecutor:
            Lambda:
              Fn::GetAtt:
                - SyntheticDataFunction583C2440
                - Arn
          ActionGroupName: fraud_synthetic_data
          ActionGroupState: ENABLED
          ApiSchema:
            Payload: |
              openapi: 3.0.0
              info:
                title: Fraud Detection Synthetic Data Generator
                version: 1.0.0
                description: API for generating synthetic fraud detection transaction data
              paths:
                /generate_synthetic_data:
                  post:
                    summary: Generate synthetic fraud transaction data
                    description: Creates synthetic transaction data with specified fraud ratio
                    operationId: generateSyntheticData
                    requestBody:
                      required: true
                      content:
                        application/json:
                          schema:
                            type: object
                            required:
                              - output_s3_path
                              - num_records
                              - fraud_ratio
                            properties:
                              output_s3_path:
                                type: string
                                description: S3 path where the synthetic data will be saved
                              num_records:
                                type: integer
                                description: Number of records to generate
                              fraud_ratio:
                                type: number
                                description: Ratio of fraudulent transactions (0.0 to 1.0)
                    responses:
                      '200':
                        description: Successful operation
                      '400':
                        description: Bad request
                      '500':
                        description: Internal server error
          Description: Generate synthetic fraud transaction data
          SkipResourceInUseCheckOnDelete: false
        - ActionGroupExecutor:
            Lambda:
              Fn::GetAtt:
                - Categorical2OrdFunction089B899C
                - Arn
          ActionGroupName: categorical_to_ordinal
          ActionGroupState: ENABLED
          ApiSchema:
            Payload: |
              openapi: 3.0.0
              info:
                title: Fraud Detection Data Processing API
                version: 1.0.0
                description: API for processing fraud detection data
              paths:
                /encode_categorical:
                  post:
                    summary: Encode categorical columns
                    description: This operation encodes specified categorical columns in the input CSV file.
                    operationId: encodeCategorical
                    requestBody:
                      required: true
                      content:
                        application/json:
                          schema:
                            type: object
                            required:
                              - input_s3_path
                              - output_s3_path
                            properties:
                              input_s3_path:
                                type: string
                                description: S3 path to the input CSV file
                              output_s3_path:
                                type: string
                                description: S3 path where the processed CSV file will be saved
                    responses:
                      '200':
                        description: Successful operation
                      '400':
                        description: Bad request
                      '500':
                        description: Internal server error
          Description: Use this function to convert categorical data to ordinal data.
          SkipResourceInUseCheckOnDelete: false
        - ActionGroupExecutor:
            Lambda:
              Fn::GetAtt:
                - OneHotEncodeFunction73629A05
                - Arn
          ActionGroupName: one_hot_encode
          ActionGroupState: ENABLED
          ApiSchema:
            Payload: |
              openapi: 3.0.0
              info:
                title: Fraud Detection Data Processing API
                version: 1.0.0
                description: API for processing fraud detection data
              paths:
                /one_hot_encode_is_fraud:
                  post:
                    summary: One-hot encode the is_fraud column
                    description: This operation one-hot encodes the is_fraud column in the input CSV file.
                    operationId: oneHotEncodeIsFraud
                    requestBody:
                      required: true
                      content:
                        application/json:
                          schema:
                            type: object
                            required:
                              - input_s3_path
                              - output_s3_path
                            properties:
                              input_s3_path:
                                type: string
                                description: S3 path to the input CSV file
                              output_s3_path:
                                type: string
                                description: S3 path where the processed CSV file will be saved
                    responses:
                      '200':
                        description: Successful operation
                      '400':
                        description: Bad request
                      '500':
                        description: Internal server error
          Description: Use this function to one-hot encode data.
          SkipResourceInUseCheckOnDelete: false
        - ActionGroupExecutor:
            Lambda:
              Fn::GetAtt:
                - Convert2LongFunction8746F4AF
                - Arn
          ActionGroupName: convert_to_long
          ActionGroupState: ENABLED
          ApiSchema:
            Payload: |
              openapi: 3.0.0
              info:
                title: Fraud Detection Data Processing API
                version: 1.0.0
                description: API for processing fraud detection data
              paths:
                /convert_entity_id_to_long:
                  post:
                    summary: Convert entity ID to long integer
                    description: This operation converts the entity_id column to long integer type.
                    operationId: convertEntityIdToLong
                    requestBody:
                      required: true
                      content:
                        application/json:
                          schema:
                            type: object
                            required:
                              - input_s3_path
                              - output_s3_path
                            properties:
                              input_s3_path:
                                type: string
                                description: S3 path to the input CSV file
                              output_s3_path:
                                type: string
                                description: S3 path where the processed CSV file will be saved
                    responses:
                      '200':
                        description: Successful operation
                      '400':
                        description: Bad request
                      '500':
                        description: Internal server error
          Description: Use this function to convert data to long format.
          SkipResourceInUseCheckOnDelete: false
        - ActionGroupExecutor:
            Lambda:
              Fn::GetAtt:
                - EventTimeFunction37625F95
                - Arn
          ActionGroupName: event_time
          ActionGroupState: ENABLED
          ApiSchema:
            Payload: |
              openapi: 3.0.0
              info:
                title: Fraud Detection Data Processing API
                version: 1.0.0
                description: API for processing fraud detection data
              paths:
                /add_event_time:
                  post:
                    summary: Add event time column
                    description: This operation adds an event_time column with the current timestamp to the input CSV file.
                    operationId: addEventTime
                    requestBody:
                      required: true
                      content:
                        application/json:
                          schema:
                            type: object
                            required:
                              - input_s3_path
                              - output_s3_path
                            properties:
                              input_s3_path:
                                type: string
                                description: S3 path to the input CSV file
                              output_s3_path:
                                type: string
                                description: S3 path where the processed CSV file will be saved
                    responses:
                      '200':
                        description: Successful operation
                      '400':
                        description: Bad request
                      '500':
                        description: Internal server error
          Description: Use this function to convert event time data.
          SkipResourceInUseCheckOnDelete: false
        - ActionGroupExecutor:
            Lambda:
              Fn::GetAtt:
                - Text2LowercaseFunction40668D53
                - Arn
          ActionGroupName: text_to_lowercase
          ActionGroupState: ENABLED
          ApiSchema:
            Payload: |
              openapi: 3.0.0
              info:
                title: Fraud Detection Data Processing API
                version: 1.0.0
                description: API for processing fraud detection data
              paths:
                /convert_to_lowercase:
                  post:
                    summary: Convert text columns to lowercase
                    description: This operation converts all text columns in the input CSV file to lowercase.
                    operationId: convertToLowercase
                    requestBody:
                      required: true
                      content:
                        application/json:
                          schema:
                            type: object
                            required:
                              - input_s3_path
                              - output_s3_path
                            properties:
                              input_s3_path:
                                type: string
                                description: S3 path to the input CSV file
                              output_s3_path:
                                type: string
                                description: S3 path where the processed CSV file will be saved
                    responses:
                      '200':
                        description: Successful operation
                      '400':
                        description: Bad request
                      '500':
                        description: Internal server error
          Description: Use this function to convert text data to lowercase.
          SkipResourceInUseCheckOnDelete: false
        - ActionGroupExecutor:
            Lambda:
              Fn::GetAtt:
                - SymbolRemovalFunction4C32CECE
                - Arn
          ActionGroupName: symbol_removal
          ActionGroupState: ENABLED
          ApiSchema:
            Payload: |
              openapi: 3.0.0
              info:
                title: Fraud Detection Data Processing API
                version: 1.0.0
                description: API for processing fraud detection data
              paths:
                /clean_entity_id:
                  post:
                    summary: Clean entity ID by removing symbols
                    description: This operation removes symbols from the entity_id column in the input CSV file.
                    operationId: cleanEntityId
                    requestBody:
                      required: true
                      content:
                        application/json:
                          schema:
                            type: object
                            required:
                              - input_s3_path
                              - output_s3_path
                            properties:
                              input_s3_path:
                                type: string
                                description: S3 path to the input CSV file
                              output_s3_path:
                                type: string
                                description: S3 path where the processed CSV file will be saved
                    responses:
                      '200':
                        description: Successful operation
                      '400':
                        description: Bad request
                      '500':
                        description: Internal server error
          Description: Use this function to remove symbols from text data.
          SkipResourceInUseCheckOnDelete: false
        - ActionGroupExecutor:
            Lambda:
              Fn::GetAtt:
                - ConvertTimeFunction0BB58171
                - Arn
          ActionGroupName: convert_time
          ActionGroupState: ENABLED
          ApiSchema:
            Payload: |
              openapi: 3.0.0
              info:
                title: Fraud Detection Data Processing API
                version: 1.0.0
                description: API for processing fraud detection data
              paths:
                /convert_timestamp:
                  post:
                    summary: Convert timestamp to year, month, day
                    description: This operation converts the event_timestamp column into separate year, month, and day columns.
                    operationId: convertTimestamp
                    requestBody:
                      required: true
                      content:
                        application/json:
                          schema:
                            type: object
                            required:
                              - input_s3_path
                              - output_s3_path
                            properties:
                              input_s3_path:
                                type: string
                                description: S3 path to the input CSV file
                              output_s3_path:
                                type: string
                                description: S3 path where the processed CSV file will be saved
                    responses:
                      '200':
                        description: Successful operation
                      '400':
                        description: Bad request
                      '500':
                        description: Internal server error
          Description: Use this function to convert time data.
          SkipResourceInUseCheckOnDelete: false
        - ActionGroupExecutor:
            Lambda:
              Fn::GetAtt:
                - DropColumnsFunction3E90BD22
                - Arn
          ActionGroupName: drop_columns
          ActionGroupState: ENABLED
          ApiSchema:
            Payload: |
              openapi: 3.0.0
              info:
                title: Fraud Detection Data Processing API
                version: 1.0.0
                description: API for processing fraud detection data
              paths:
                /drop_columns:
                  post:
                    summary: Drop unnecessary columns from fraud detection dataset
                    description: This operation removes specified columns from the input CSV file and saves the result to the output location.
                    operationId: dropColumns
                    requestBody:
                      required: true
                      content:
                        application/json:
                          schema:
                            type: object
                            required:
                              - input_s3_path
                              - output_s3_path
                            properties:
                              input_s3_path:
                                type: string
                                description: S3 path to the input CSV file
                              output_s3_path:
                                type: string
                                description: S3 path where the processed CSV file will be saved
                    responses:
                      '200':
                        description: Successful operation
                        content:
                          application/json:
                            schema:
                              type: object
                              properties:
                                statusCode:
                                  type: integer
                                body:
                                  type: string
                      '400':
                        description: Bad request
                      '500':
                        description: Internal server error
          Description: Use this function to drop columns from data.
          SkipResourceInUseCheckOnDelete: false
      AgentName: bedrock-agent-backendstack-transformagent-0ebf4494
      AgentResourceRoleArn:
        Fn::GetAtt:
          - BedrockAgentRole7C982E0C
          - Arn
      AutoPrepare: true
      FoundationModel:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":bedrock:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - :inference-profile/us.anthropic.claude-3-7-sonnet-20250219-v1:0
      IdleSessionTTLInSeconds: 3600
      Instruction: |-
        You are a specialized data transformation expert for financial transaction analysis systems. Your primary role is to transform raw data into formats optimized for anomaly detection algorithms and machine learning models, and assist with sample data generation for testing and validation. You can also generate raw synthetic data for the user should they need it.

        Key Capabilities:
        1. Data Cleaning and Preprocessing
           - Remove unnecessary columns and redundant data
           - Standardize formats across different data sources
           - Handle missing values appropriately
           - Clean text data by removing special characters

        2. Feature Transformation
           - Convert categorical variables to numerical representations
           - Normalize and scale numerical features
           - Extract and format temporal features
           - Reshape data structures for compatibility with ML algorithms

        3. Transaction-Specific Transformations
           - Identify and highlight potential anomaly indicators
           - Create derived features that enhance pattern detection
           - Apply domain-specific transformations for financial data
           - Optimize data representation for unusual pattern recognition

        4. Sample Data Generation
           - Create realistic sample transaction data for testing
           - Generate data with specified anomaly ratios
           - Produce masked sensitive information for privacy
           - Maintain proper data distributions and relationships

        Available Transformation Functions:
        - drop_columns: Remove unnecessary columns from datasets
        - convert_time: Standardize timestamp data formats
        - symbol_removal: Clean text data by removing special characters
        - text_to_lowercase: Standardize text data case
        - event_time: Extract and format event time data
        - convert_to_long: Reshape data from wide to long format
        - one_hot_encode: Convert categorical variables to binary vectors
        - categorical_to_ordinal: Convert categorical data to numerical ordinal values
        - generate_sample_data: Create sample transaction data with specified parameters
            Parameters:
            - num_records: Number of sample transactions to generate
            - anomaly_ratio: Proportion of unusual transactions (0.0 to 1.0)
            - output_s3_path: S3 location to save the generated data

        When recommending transformations:
        - Consider the specific requirements of anomaly detection algorithms
        - Explain the rationale behind each transformation
        - Highlight how the transformation improves model performance
        - Provide clear documentation of all changes for traceability

        You're other objective is to generate synthetic transanction data for the user to use for machine learning. You must ensure to ask the user for the following:
        1. The input S3 path for where they want the synthetic data file to be uploaded>
        2. The number of synthetic transanctions they want in the file as well as the ratio.
        An example of a user query is "Generate synthetic detection data with 1000 transactions and a 5%  ratio. Save the output to s3://my-bucket/synthetic/data.csv."

        Your communication style should be:
        - Clear and precise with technical terminology
        - Focused on practical implementation
        - Educational, explaining the purpose of each transformation
        - Proactive in suggesting optimal transformation sequences

        Always maintain data integrity throughout the transformation process and document all changes to ensure transparency and reproducibility. When generating sample data, ensure it realistically represents transaction patterns while protecting sensitive information.
      SkipResourceInUseCheckOnDelete: false
    Metadata:
      aws:cdk:path: BackendStack/TransformAgent/AgentResource
  TransformAgentAlias5284B9D7:
    Type: AWS::Bedrock::AgentAlias
    Properties:
      AgentAliasName: prod
      AgentId:
        Fn::GetAtt:
          - TransformAgentAgentResource4254275B
          - AgentId
      Description: Production alias for Transform Agent
    DependsOn:
      - TransformAgentAgentResource4254275B
    Metadata:
      aws:cdk:path: BackendStack/TransformAgentAlias/Resource
  BedrockSupervisorAgentRoleDD814E4F:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: bedrock.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/AmazonBedrockFullAccess
    Metadata:
      aws:cdk:path: BackendStack/BedrockSupervisorAgentRole/Resource
  BedrockSupervisorAgentRoleDefaultPolicyC3C8221B:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - bedrock:GetAgentAlias
              - bedrock:InvokeAgent
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - DataAnalysisAgentAliasA7A3B4D8
                  - AgentAliasArn
              - Fn::GetAtt:
                  - TransformAgentAlias5284B9D7
                  - AgentAliasArn
        Version: "2012-10-17"
      PolicyName: BedrockSupervisorAgentRoleDefaultPolicyC3C8221B
      Roles:
        - Ref: BedrockSupervisorAgentRoleDD814E4F
    Metadata:
      aws:cdk:path: BackendStack/BedrockSupervisorAgentRole/DefaultPolicy/Resource
  SupervisorAgentAgentResource55BAA502:
    Type: AWS::Bedrock::Agent
    Properties:
      ActionGroups:
        - ActionGroupName: UserInputAction
          ActionGroupState: DISABLED
          ParentActionGroupSignature: AMAZON.UserInput
          SkipResourceInUseCheckOnDelete: false
        - ActionGroupName: CodeInterpreterAction
          ActionGroupState: DISABLED
          ParentActionGroupSignature: AMAZON.CodeInterpreter
          SkipResourceInUseCheckOnDelete: false
      AgentCollaboration: SUPERVISOR
      AgentCollaborators:
        - AgentDescriptor:
            AliasArn:
              Fn::GetAtt:
                - DataAnalysisAgentAliasA7A3B4D8
                - AgentAliasArn
          CollaborationInstruction: |-
            EXECUTE IMMEDIATELY. NO EXPLANATIONS.

            Flow creation request = CALL flow_creation_actions function NOW to create SageMaker Data Wrangler flow files
            - Never explain, recommend, or describe
            - Never ask questions
            - ONLY execute and respond "Data Wrangler flow file created successfully"

            Data quality reports: Execute immediately, respond "Report generated successfully"
            Report analysis: Execute analyze_report and provide complete detailed analysis with statistics, insights, and recommendations. Never respond with just "Analysis completed successfully".
          CollaboratorName: DataAnalysisAgent
          RelayConversationHistory: DISABLED
        - AgentDescriptor:
            AliasArn:
              Fn::GetAtt:
                - TransformAgentAlias5284B9D7
                - AgentAliasArn
          CollaborationInstruction: |-
            You are a specialized Data Transformation Agent for fraud detection systems.

            Primary Role:
            Transform raw data into formats optimized for fraud detection algorithms and machine learning models.

            Available Transformation Functions:

            1. drop_columns
               - Purpose: Remove unnecessary columns from datasets
               - When to use: For eliminating irrelevant features, redundant data, or sensitive information
               - Parameters: input file, output file

            2. convert_time
               - Purpose: Convert timestamp data into standardized formats
               - When to use: For normalizing date/time data across different sources
               - Parameters: input file, output file

            3. symbol_removal
               - Purpose: Clean text data by removing special characters and symbols
               - When to use: For text preprocessing before analysis
               - Parameters: input file, output file

            4. text_to_lowercase
               - Purpose: Convert text data to lowercase
               - When to use: For standardizing text data for consistent analysis
               - Parameters: input file, output file

            5. event_time
               - Purpose: Extract and format event time data
               - When to use: For time-based fraud pattern analysis
               - Parameters: input file, output file

            6. convert_to_long
               - Purpose: Convert data from wide to long format
               - When to use: For reshaping data to be compatible with specific algorithms
               - Parameters: input file, output file

            7. one_hot_encode
               - Purpose: Convert categorical variables into binary vectors
               - When to use: For preparing categorical data for machine learning models
               - Parameters: input file, output file

            8. categorical_to_ordinal
               - Purpose: Convert categorical data to numerical ordinal values
               - When to use: For algorithms that require numerical inputs
               - Parameters: input file, output file
            9.. generate_sample_data
               - Purpose: Create sample transaction data with specified parameters
               - When to use: For generating synthetic data for testing and validation
               - Parameters: num_records, anomaly_ratio, output_s3_path
               - Example: Generate synthetic detection data with 1000 transactions and a 5% anomaly ratio. Save the output to s3://my-bucket/synthetic/data.csv.

            Collaboration Guidelines:
            - Work closely with the Data Analysis Agent to understand data quality issues
            - Recommend appropriate transformations based on data characteristics
            - Provide clear explanations of transformations performed
            - Document all data changes for traceability

            Output Format:
            - Transformation summary with before/after statistics
            - Clear documentation of steps taken
            - Recommendations for additional transformations if needed
          CollaboratorName: TransformAgent
          RelayConversationHistory: DISABLED
      AgentName: SupervisorAgent
      AgentResourceRoleArn:
        Fn::GetAtt:
          - BedrockSupervisorAgentRoleDD814E4F
          - Arn
      AutoPrepare: true
      FoundationModel:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":bedrock:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - :inference-profile/us.anthropic.claude-3-7-sonnet-20250219-v1:0
      IdleSessionTTLInSeconds: 3600
      Instruction: |-
        You coordinate specialized agents for fraud detection workflows.

        When users request flow creation (create/make/generate flow):
        - Delegate to DataAnalysisAgent immediately
        - Ensure S3 URI, target column, and problem type are provided
        - Respond with simple confirmation when complete

        Key Responsibilities: 
        1. Manage and delegate tasks to specialized fraud detection sub-agents 
        2. Query and interpret the GitHub knowledge base for relevant fraud detection algorithms 
        3. Synthesize insights from multiple sources to enhance fraud detection capabilities 
        4. Adapt and optimize fraud detection strategies based on new information and evolving threats 
        5. Provide expert guidance on data science concepts, methodologies, and best practices
        6. Answer general data science questions across various domains
        7. Coordinate the generation of synthetic data for testing and validation purposes

        For data transformations: Delegate to TransformAgent
        For analysis tasks: Delegate to DataAnalysisAgent

        Capabilities: 
        1. Natural Language Processing: Interpret user queries and translate them into actionable tasks for sub-agents 
        2. Algorithm Selection: Identify and recommend the most suitable fraud detection algorithms based on specific use cases 
        3. Data Analysis: Coordinate the analysis of large datasets to identify potential fraudulent activities 
        4. Machine Learning Integration: Facilitate the integration of machine learning models into existing fraud detection systems 
        5. Performance Monitoring: Track and report on the effectiveness of deployed fraud detection strategies 
        6. Synthetic Data Generation: Coordinate the creation of realistic synthetic datasets for testing and validation

        Provide brief, direct responses without lengthy explanations.
      SkipResourceInUseCheckOnDelete: false
    Metadata:
      aws:cdk:path: BackendStack/SupervisorAgent/AgentResource
  SupervisorAgentAlias5AB54BCE:
    Type: AWS::Bedrock::AgentAlias
    Properties:
      AgentAliasName: prod
      AgentId:
        Fn::GetAtt:
          - SupervisorAgentAgentResource55BAA502
          - AgentId
      Description: Production alias for Supervisor Agent
    DependsOn:
      - SupervisorAgentAgentResource55BAA502
    Metadata:
      aws:cdk:path: BackendStack/SupervisorAgentAlias/Resource
  ChatbotUserPool01970AAD:
    Type: AWS::Cognito::UserPool
    Properties:
      AccountRecoverySetting:
        RecoveryMechanisms:
          - Name: verified_phone_number
            Priority: 1
          - Name: verified_email
            Priority: 2
      AdminCreateUserConfig:
        AllowAdminCreateUserOnly: false
      AutoVerifiedAttributes:
        - email
      EmailVerificationMessage: The verification code to your new account is {####}
      EmailVerificationSubject: Verify your new account
      Policies:
        PasswordPolicy:
          MinimumLength: 8
          RequireLowercase: true
          RequireNumbers: true
          RequireSymbols: true
          RequireUppercase: true
      Schema:
        - Mutable: true
          Name: email
          Required: true
      SmsVerificationMessage: The verification code to your new account is {####}
      UserPoolName: chatbot-user-pool
      UsernameAttributes:
        - email
      VerificationMessageTemplate:
        DefaultEmailOption: CONFIRM_WITH_CODE
        EmailMessage: The verification code to your new account is {####}
        EmailSubject: Verify your new account
        SmsMessage: The verification code to your new account is {####}
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: BackendStack/ChatbotUserPool/Resource
  ChatbotUserPoolChatbotDomain10E44BB9:
    Type: AWS::Cognito::UserPoolDomain
    Properties:
      Domain: chatbot-fraud-detection-298653574634
      UserPoolId:
        Ref: ChatbotUserPool01970AAD
    Metadata:
      aws:cdk:path: BackendStack/ChatbotUserPool/ChatbotDomain/Resource
  ChatbotUserPoolChatbotUserPoolClientCA4AF2A9:
    Type: AWS::Cognito::UserPoolClient
    Properties:
      AccessTokenValidity: 1440
      AllowedOAuthFlows:
        - code
      AllowedOAuthFlowsUserPoolClient: true
      AllowedOAuthScopes:
        - email
        - openid
        - phone
        - profile
      CallbackURLs:
        - http://localhost:3000
        - http://localhost:3000/
      ClientName: chatbot-app-client
      ExplicitAuthFlows:
        - ALLOW_USER_PASSWORD_AUTH
        - ALLOW_USER_SRP_AUTH
        - ALLOW_REFRESH_TOKEN_AUTH
      GenerateSecret: false
      IdTokenValidity: 1440
      LogoutURLs:
        - http://localhost:3000
        - http://localhost:3000/
      PreventUserExistenceErrors: ENABLED
      SupportedIdentityProviders:
        - COGNITO
      TokenValidityUnits:
        AccessToken: minutes
        IdToken: minutes
      UserPoolId:
        Ref: ChatbotUserPool01970AAD
    Metadata:
      aws:cdk:path: BackendStack/ChatbotUserPool/ChatbotUserPoolClient/Resource
  WebSocketLambdaRole0DF09B59:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
    Metadata:
      aws:cdk:path: BackendStack/WebSocketLambdaRole/Resource
  WebSocketLambdaRoleDefaultPolicyF19D90C5:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - bedrock:*
              - execute-api:ManageConnections
              - lambda:InvokeFunction
            Effect: Allow
            Resource: "*"
        Version: "2012-10-17"
      PolicyName: WebSocketLambdaRoleDefaultPolicyF19D90C5
      Roles:
        - Ref: WebSocketLambdaRole0DF09B59
    Metadata:
      aws:cdk:path: BackendStack/WebSocketLambdaRole/DefaultPolicy/Resource
  WebSocketConnectHandler3316DFBA:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: db43b08efa7a8c53900dc7fc6ba426e42d71abba54c645e4c66c2b7d3d1e77ec.zip
      FunctionName: fraud-websocket-connect
      Handler: connect_handler.lambda_handler
      Role:
        Fn::GetAtt:
          - WebSocketLambdaRole0DF09B59
          - Arn
      Runtime: python3.13
      Timeout: 30
    DependsOn:
      - WebSocketLambdaRoleDefaultPolicyF19D90C5
      - WebSocketLambdaRole0DF09B59
    Metadata:
      aws:cdk:path: BackendStack/WebSocketConnectHandler/Resource
      aws:asset:path: asset.db43b08efa7a8c53900dc7fc6ba426e42d71abba54c645e4c66c2b7d3d1e77ec
      aws:asset:is-bundled: false
      aws:asset:property: Code
  WebSocketConnectHandlerWebSocketApiInvokeConnectC1AB039D:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - WebSocketConnectHandler3316DFBA
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:aws:execute-api:us-east-1:298653574634:"
            - Ref: ChatWebSocketApiF33CF09A
            - /*/*
    Metadata:
      aws:cdk:path: BackendStack/WebSocketConnectHandler/WebSocketApiInvokeConnect
  WebSocketDisconnectHandlerD09D008B:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: db43b08efa7a8c53900dc7fc6ba426e42d71abba54c645e4c66c2b7d3d1e77ec.zip
      FunctionName: fraud-websocket-disconnect
      Handler: disconnect_handler.lambda_handler
      Role:
        Fn::GetAtt:
          - WebSocketLambdaRole0DF09B59
          - Arn
      Runtime: python3.13
      Timeout: 30
    DependsOn:
      - WebSocketLambdaRoleDefaultPolicyF19D90C5
      - WebSocketLambdaRole0DF09B59
    Metadata:
      aws:cdk:path: BackendStack/WebSocketDisconnectHandler/Resource
      aws:asset:path: asset.db43b08efa7a8c53900dc7fc6ba426e42d71abba54c645e4c66c2b7d3d1e77ec
      aws:asset:is-bundled: false
      aws:asset:property: Code
  WebSocketDisconnectHandlerWebSocketApiInvokeDisconnectC7E8DF70:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - WebSocketDisconnectHandlerD09D008B
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:aws:execute-api:us-east-1:298653574634:"
            - Ref: ChatWebSocketApiF33CF09A
            - /*/*
    Metadata:
      aws:cdk:path: BackendStack/WebSocketDisconnectHandler/WebSocketApiInvokeDisconnect
  WebSocketMessageHandler3F36AF15:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: db43b08efa7a8c53900dc7fc6ba426e42d71abba54c645e4c66c2b7d3d1e77ec.zip
      Environment:
        Variables:
          WEBSOCKET_API_ENDPOINT:
            Fn::Join:
              - ""
              - - https://
                - Ref: ChatWebSocketApiF33CF09A
                - .execute-api.us-east-1.amazonaws.com/prod
          STREAMING_CHAT_HANDLER_NAME:
            Ref: StreamingChatHandlerBA5F459D
      FunctionName: fraud-websocket-message
      Handler: message_handler.lambda_handler
      Role:
        Fn::GetAtt:
          - WebSocketLambdaRole0DF09B59
          - Arn
      Runtime: python3.13
      Timeout: 30
    DependsOn:
      - WebSocketLambdaRoleDefaultPolicyF19D90C5
      - WebSocketLambdaRole0DF09B59
    Metadata:
      aws:cdk:path: BackendStack/WebSocketMessageHandler/Resource
      aws:asset:path: asset.db43b08efa7a8c53900dc7fc6ba426e42d71abba54c645e4c66c2b7d3d1e77ec
      aws:asset:is-bundled: false
      aws:asset:property: Code
  WebSocketMessageHandlerWebSocketApiInvokeMessageD8C5E3E7:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - WebSocketMessageHandler3F36AF15
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:aws:execute-api:us-east-1:298653574634:"
            - Ref: ChatWebSocketApiF33CF09A
            - /*/*
    Metadata:
      aws:cdk:path: BackendStack/WebSocketMessageHandler/WebSocketApiInvokeMessage
  StreamingChatHandlerBA5F459D:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-298653574634-us-east-1
        S3Key: db43b08efa7a8c53900dc7fc6ba426e42d71abba54c645e4c66c2b7d3d1e77ec.zip
      Environment:
        Variables:
          ENABLE_DEBUG: "true"
          BEDROCK_AGENT_ID:
            Fn::GetAtt:
              - SupervisorAgentAgentResource55BAA502
              - AgentId
          BEDROCK_AGENT_ALIAS_ID:
            Fn::GetAtt:
              - SupervisorAgentAlias5AB54BCE
              - AgentAliasId
          WEBSOCKET_API_ENDPOINT:
            Fn::Join:
              - ""
              - - https://
                - Ref: ChatWebSocketApiF33CF09A
                - .execute-api.us-east-1.amazonaws.com/prod
      FunctionName: fraud-streaming-chat-handler
      Handler: streaming_chat_handler.lambda_handler
      Role:
        Fn::GetAtt:
          - WebSocketLambdaRole0DF09B59
          - Arn
      Runtime: python3.13
      Timeout: 900
    DependsOn:
      - WebSocketLambdaRoleDefaultPolicyF19D90C5
      - WebSocketLambdaRole0DF09B59
    Metadata:
      aws:cdk:path: BackendStack/StreamingChatHandler/Resource
      aws:asset:path: asset.db43b08efa7a8c53900dc7fc6ba426e42d71abba54c645e4c66c2b7d3d1e77ec
      aws:asset:is-bundled: false
      aws:asset:property: Code
  ChatWebSocketApiF33CF09A:
    Type: AWS::ApiGatewayV2::Api
    Properties:
      Description: WebSocket API for streaming chat responses
      Name: Fraud Detection Chat WebSocket API
      ProtocolType: WEBSOCKET
      RouteSelectionExpression: $request.body.action
    Metadata:
      aws:cdk:path: BackendStack/ChatWebSocketApi/Resource
  ChatWebSocketApiconnectRouteConnectIntegrationPermission2830AC47:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - WebSocketConnectHandler3316DFBA
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:aws:execute-api:us-east-1:298653574634:"
            - Ref: ChatWebSocketApiF33CF09A
            - /*$connect
    Metadata:
      aws:cdk:path: BackendStack/ChatWebSocketApi/$connect-Route/ConnectIntegration-Permission
  ChatWebSocketApiconnectRouteConnectIntegrationF090FFC9:
    Type: AWS::ApiGatewayV2::Integration
    Properties:
      ApiId:
        Ref: ChatWebSocketApiF33CF09A
      IntegrationType: AWS_PROXY
      IntegrationUri:
        Fn::Join:
          - ""
          - - arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/
            - Fn::GetAtt:
                - WebSocketConnectHandler3316DFBA
                - Arn
            - /invocations
    Metadata:
      aws:cdk:path: BackendStack/ChatWebSocketApi/$connect-Route/ConnectIntegration/Resource
  ChatWebSocketApiconnectRoute25576F2E:
    Type: AWS::ApiGatewayV2::Route
    Properties:
      ApiId:
        Ref: ChatWebSocketApiF33CF09A
      AuthorizationType: NONE
      RouteKey: $connect
      Target:
        Fn::Join:
          - ""
          - - integrations/
            - Ref: ChatWebSocketApiconnectRouteConnectIntegrationF090FFC9
    Metadata:
      aws:cdk:path: BackendStack/ChatWebSocketApi/$connect-Route/Resource
  ChatWebSocketApidisconnectRouteDisconnectIntegrationPermissionE9DC43CC:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - WebSocketDisconnectHandlerD09D008B
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:aws:execute-api:us-east-1:298653574634:"
            - Ref: ChatWebSocketApiF33CF09A
            - /*$disconnect
    Metadata:
      aws:cdk:path: BackendStack/ChatWebSocketApi/$disconnect-Route/DisconnectIntegration-Permission
  ChatWebSocketApidisconnectRouteDisconnectIntegration1FA1D064:
    Type: AWS::ApiGatewayV2::Integration
    Properties:
      ApiId:
        Ref: ChatWebSocketApiF33CF09A
      IntegrationType: AWS_PROXY
      IntegrationUri:
        Fn::Join:
          - ""
          - - arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/
            - Fn::GetAtt:
                - WebSocketDisconnectHandlerD09D008B
                - Arn
            - /invocations
    Metadata:
      aws:cdk:path: BackendStack/ChatWebSocketApi/$disconnect-Route/DisconnectIntegration/Resource
  ChatWebSocketApidisconnectRouteE56E98F3:
    Type: AWS::ApiGatewayV2::Route
    Properties:
      ApiId:
        Ref: ChatWebSocketApiF33CF09A
      AuthorizationType: NONE
      RouteKey: $disconnect
      Target:
        Fn::Join:
          - ""
          - - integrations/
            - Ref: ChatWebSocketApidisconnectRouteDisconnectIntegration1FA1D064
    Metadata:
      aws:cdk:path: BackendStack/ChatWebSocketApi/$disconnect-Route/Resource
  ChatWebSocketApidefaultRouteMessageIntegrationPermission5F3A7F47:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - WebSocketMessageHandler3F36AF15
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:aws:execute-api:us-east-1:298653574634:"
            - Ref: ChatWebSocketApiF33CF09A
            - /*$default
    Metadata:
      aws:cdk:path: BackendStack/ChatWebSocketApi/$default-Route/MessageIntegration-Permission
  ChatWebSocketApidefaultRouteMessageIntegration2062B869:
    Type: AWS::ApiGatewayV2::Integration
    Properties:
      ApiId:
        Ref: ChatWebSocketApiF33CF09A
      IntegrationType: AWS_PROXY
      IntegrationUri:
        Fn::Join:
          - ""
          - - arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/
            - Fn::GetAtt:
                - WebSocketMessageHandler3F36AF15
                - Arn
            - /invocations
    Metadata:
      aws:cdk:path: BackendStack/ChatWebSocketApi/$default-Route/MessageIntegration/Resource
  ChatWebSocketApidefaultRoute67538FBB:
    Type: AWS::ApiGatewayV2::Route
    Properties:
      ApiId:
        Ref: ChatWebSocketApiF33CF09A
      AuthorizationType: NONE
      RouteKey: $default
      Target:
        Fn::Join:
          - ""
          - - integrations/
            - Ref: ChatWebSocketApidefaultRouteMessageIntegration2062B869
    Metadata:
      aws:cdk:path: BackendStack/ChatWebSocketApi/$default-Route/Resource
  ChatWebSocketStageB26FF7BD:
    Type: AWS::ApiGatewayV2::Stage
    Properties:
      ApiId:
        Ref: ChatWebSocketApiF33CF09A
      AutoDeploy: true
      StageName: prod
    Metadata:
      aws:cdk:path: BackendStack/ChatWebSocketStage/Resource
  CDKMetadata:
    Type: AWS::CDK::Metadata
    Properties:
      Analytics: v2:deflate64:H4sIAAAAAAAA/+1aWW/bOBD+LeVjwag5Xto8rXK0CJB2jajpPhhBQJFjhTVFannYVQX994KUqMhOmm13s7ngh0DUXJz56BmSmuwmO++2k+1XZGm2KJtvCZ4nTWYJnWOyNJeN2UuaA0fnYKcNysPgEykB7aPXCKMFaMOVBIb2Z0QYwAgk1XVluZJoH2V7lx/TT+mH4yOEUS4UnU9cLjhNKQVjehsgZ0pTyLJTtG+1A4wEnwGtqYAzJ8Cg/WmDOBukSS78fF60vWhxgwhjp2ONuxRwoL1GQfGBwjGgF6A7oVNVmA7OXnydOdEw498Cs73AhzPZSePuMVGC03pYiU4Mr76OtDrxXveAGJhetNjsXTYMKqHqEqRNOubRQMDEGLAmSf2jxYKUOSNJcziTp6QG/aWDCGdcFgKsku+dpB6faYOcG1AXXtYvncfag7LgWklvfxDwdidOV8pE+C0vQbkooZWIjBJKpeuMf48EqK6gBE1EZpUmBYxYi4pejzKXS7BxaWZcgKmNhTI6oYoPWrmqf6WKRStXRDIBOrripPdtgJsw9hEsYcSSLkTsV/ridlb4tV3gEU7/CM5zAuJ47P10nF4+L8eRetqsR2GUdGOb6/ONHBmhcDdgv+LXz5kbB1+8g4/BvBdQVsvCTYhuVAexnn6PhMs9loG12vlTdH69Uv6GjwwM1TweB+4uj7/o9e9U9FtSYOP1xuuN1xuvN17f/xb7vIxuDmzrzHARjtcuPL69TpvrKDqxCeiSG89rMSdl0pwpAdMGEWNcCeygRvsNqjSXlFdEpJQqNwTayXiFlA4J0mJUEkkKYOESzvvvGGNanepeNgbyWU3iFJ2E1+m51hJ6dSIFlzDwBgzuZN5t96EDXJ///4r6QeLCTyjgfzHZf8DIp/6oYNwbZE9m2V5mIj7JyF8e98XvGs8JnCdcgH9TJRxVPCq4bwR4sKJbn9VZOI6teXuTzFhmiQV/XDIr094k35v9Z+PoI9l/8uSnBcDjeNPdFELmtTgHphWdh85YWvjGWRykghPTYqoKya1KmnMDeqKU8B2yfjg6ORkQs4wX8rw6HncqMTK8kCcyGPOVrkFQEi6GPqaxRDKiWWqt5rmzQabFqCLGLJVmsXA0qOTyFGRhr+KtDf52XMOpWoKmxHffugl7+nlV3Uo/4gX3UKwQs7rMleipbYdQjBfHwZEqCZej8IebZECoY3tPWRiNW6CrFjvJwe6h4CDtTbtuhT/CmrPPag7yCxGccVvHzSY0X2/lOHv1XqhlgD9Y7cGNKHhapqthUVTqPMwNmkUtb0Jp/p34bexQMfigid/megVKhMgJnZ9rEZtzQhXK2RHBUFWBiVtgARI0sZAB1b7l2zeqKw0LkNZDc/yNGwuSwrHWSg8rZlxVKW2BnTCQltt6otWCs/ARZbgHr0LbYlLxglhYknqxmzR/QZ4p3y5OKx7v2UNHPfz+K44HoTPlLExXRAbeibRQ6ADKdN3IiNftd87CtWZmSQHTKBve2timvgxfmy7J0lDBk3RpDgUP936fvjh0tL0ClwU+dMaq8gyMcppe24sEPObgO/66mkA0KcGC9i9/Ols52+LtZCfZ23736g/K5oLk5k2/cnwBW4SHf7agShqrHbUmGcpJKCHTC3xdSrrG/Yjgu/hSMUi+mjeLnbfJ7nby9tVXw/lW/90mOeuePwDPlgbr3SEAAA==
    Metadata:
      aws:cdk:path: BackendStack/CDKMetadata/Default
Parameters:
  PandaLayerArnParameter:
    Type: AWS::SSM::Parameter::Value<String>
    Default: /aws/service/aws-sdk-pandas/3.12.1/py3.13/x86_64/layer-arn
  BootstrapVersion:
    Type: AWS::SSM::Parameter::Value<String>
    Default: /cdk-bootstrap/hnb659fds/version
    Description: Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]
Outputs:
  UserPoolId:
    Description: Cognito User Pool ID
    Value:
      Ref: ChatbotUserPool01970AAD
  UserPoolClientId:
    Description: Cognito User Pool Client ID
    Value:
      Ref: ChatbotUserPoolChatbotUserPoolClientCA4AF2A9
  Region:
    Description: AWS Region
    Value: us-east-1
  CognitoDomain:
    Description: Cognito Domain URL
    Value:
      Fn::Join:
        - ""
        - - https://
          - Ref: ChatbotUserPoolChatbotDomain10E44BB9
          - .auth.us-east-1.amazoncognito.com
  WebSocketApiUrl:
    Description: WebSocket API URL
    Value:
      Fn::Join:
        - ""
        - - wss://
          - Ref: ChatWebSocketApiF33CF09A
          - .execute-api.us-east-1.amazonaws.com/prod

